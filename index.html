<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Morpion â€” Jouer contre l'IA</title>
  <style>
    body{
      font-family: Arial, sans-serif;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      margin:0;
      background:#0f1724;
      color:#E6EEF6;
    }
    h1{margin-bottom:10px}
    #board{
      display:grid;
      grid-template-columns:repeat(3,100px);
      grid-template-rows:repeat(3,100px);
      gap:8px;
      margin:20px 0;
    }
    .cell{
      background:#1e293b;
      border:none;
      border-radius:8px;
      font-size:40px;
      font-weight:bold;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition: background .2s;
    }
    .cell:hover{ background:#334155 }
    .cell:disabled{ cursor:not-allowed; opacity:.7 }
    .x{ color:#60A5FA }
    .o{ color:#6EE7B7 }
    #status{ margin:10px 0 }
    button{
      background:#6EE7B7;
      border:none;
      padding:10px 20px;
      border-radius:8px;
      font-weight:bold;
      cursor:pointer;
    }
    button:hover{ background:#34D399 }
    /* Zones publicitaires */
    .ad{
      background:#111827;
      border:1px dashed #374151;
      color:#9CA3AF;
      font-size:14px;
      text-align:center;
      margin:10px 0;
      padding:10px;
      border-radius:8px;
      width:100%;
      max-width:320px;
    }
    .ad-horizontal{
      width:100%;
      max-width:728px;
      height:90px;
    }
  </style>
</head>
<body>
  <!-- Pub haut -->
  <div class="ad ad-horizontal">[Espace pub â€” banniÃ¨re 728x90]</div>

  <h1>Morpion ðŸ¤–</h1>
  <div id="status">Ã€ toi de commencer (Joueur X)</div>

  <!-- Zone de jeu + pub latÃ©rale -->
  <div style="display:flex;gap:20px;align-items:flex-start;justify-content:center;">
    <div id="board"></div>
    <div class="ad" style="min-height:320px;">[Espace pub latÃ©ral 300x600]</div>
  </div>

  <button id="restart">Rejouer</button>

  <!-- Pub bas -->
  <div class="ad ad-horizontal">[Espace pub â€” banniÃ¨re 728x90]</div>

  <script>
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('status');
    const restartBtn = document.getElementById('restart');

    let board = Array(9).fill(null);
    let currentPlayer = 'X';
    let isGameActive = true;

    const winCombos = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    function renderBoard(){
      boardEl.innerHTML = '';
      board.forEach((val, i) => {
        const btn = document.createElement('button');
        btn.className = 'cell';
        btn.dataset.index = i;
        btn.textContent = val || '';
        if(val){
          btn.classList.add(val.toLowerCase());
          btn.disabled = true;
        }
        btn.addEventListener('click', () => makeMove(i));
        boardEl.appendChild(btn);
      });
    }

    function makeMove(i){
      if(!isGameActive || board[i]) return;
      board[i] = currentPlayer;
      renderBoard();
      if(checkWinner(currentPlayer)){
        statusEl.textContent = `ðŸŽ‰ Joueur ${currentPlayer} gagne !`;
        isGameActive = false;
        return;
      }
      if(board.every(cell => cell)) {
        statusEl.textContent = "Match nul !";
        isGameActive = false;
        return;
      }
      currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
      updateStatus();

      if(isGameActive && currentPlayer === 'O'){
        setTimeout(aiMove, 500);
      }
    }

    function aiMove(){
      let move = findBestMove('O');
      if(move === null) move = findBestMove('X');
      if(move === null) move = pickPriority();
      if(move !== null) makeMove(move);
    }

    function findBestMove(player){
      for(const combo of winCombos){
        const [a,b,c] = combo;
        const vals = [board[a], board[b], board[c]];
        const empties = combo.filter(idx => !board[idx]);
        const count = vals.filter(v => v===player).length;
        if(count === 2 && empties.length === 1){
          return empties[0];
        }
      }
      return null;
    }

    function pickPriority(){
      const order = [4,0,2,6,8,1,3,5,7];
      for(const i of order){
        if(!board[i]) return i;
      }
      return null;
    }

    function checkWinner(player){
      return winCombos.some(combo => combo.every(i => board[i]===player));
    }

    function updateStatus(){
      statusEl.textContent = currentPlayer === 'X'
        ? "Ã€ toi de jouer (X)"
        : "ðŸ¤– L'IA rÃ©flÃ©chit...";
    }

    restartBtn.addEventListener('click', () => {
      board = Array(9).fill(null);
      currentPlayer = 'X';
      isGameActive = true;
      renderBoard();
      statusEl.textContent = "Nouvelle partie â€” Ã  toi de commencer (X)";
    });

    renderBoard();
  </script>
</body>
</html>
